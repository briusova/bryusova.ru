import{getCurrentScope as Z,onScopeDispose as ee,onMounted as q,nextTick as te,isRef as ne,getCurrentInstance as z,toValue as g,computed as M,ref as C,watch as R,reactive as $,readonly as oe}from"vue";function P(e){return Z()?(ee(e),!0):!1}const J=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=e=>e!=null,le=Object.prototype.toString,ie=e=>le.call(e)==="[object Object]",S=()=>{};function K(e,o){function t(...n){return new Promise((u,c)=>{Promise.resolve(e(()=>o.apply(this,n),{fn:o,thisArg:this,args:n})).then(u).catch(c)})}return t}function se(e,o={}){let t,n,u=S;const c=f=>{clearTimeout(f),u(),u=S};return f=>{const d=g(e),s=g(o.maxWait);return t&&c(t),d<=0||s!==void 0&&s<=0?(n&&(c(n),n=null),Promise.resolve(f())):new Promise((i,l)=>{u=o.rejectOnCancel?l:i,s&&!n&&(n=setTimeout(()=>{t&&c(t),n=null,i(f())},s)),t=setTimeout(()=>{n&&c(n),n=null,i(f())},d)})}}function ue(...e){let o=0,t,n=!0,u=S,c,a,f,d,s;!ne(e[0])&&typeof e[0]=="object"?{delay:a,trailing:f=!0,leading:d=!0,rejectOnCancel:s=!1}=e[0]:[a,f=!0,d=!0,s=!1]=e;const i=()=>{t&&(clearTimeout(t),t=void 0,u(),u=S)};return m=>{const p=g(a),h=Date.now()-o,E=()=>c=m();return i(),p<=0?(o=Date.now(),E()):(h>p&&(d||!n)?(o=Date.now(),E()):f&&(c=new Promise((w,v)=>{u=s?v:w,t=setTimeout(()=>{o=Date.now(),n=!0,w(E()),i()},Math.max(0,p-h))})),!d&&!t&&(t=setTimeout(()=>n=!0,p)),n=!1,c)}}function ce(e){return z()}function I(e){return Array.isArray(e)?e:[e]}function ae(e,o=200,t={}){return K(se(o,t),e)}function fe(e,o=200,t=!1,n=!0,u=!1){return K(ue(o,t,n,u),e)}function Q(e,o=!0,t){ce()?q(e,t):o?e():te(e)}const F=J?window:void 0,de=J?window.document:void 0;function A(e){var o;const t=g(e);return(o=t==null?void 0:t.$el)!=null?o:t}function N(...e){let o,t,n,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,n,u]=e,o=F):[o,t,n,u]=e,!o)return S;t=I(t),n=I(n);const c=[],a=()=>{c.forEach(i=>i()),c.length=0},f=(i,l,m,p)=>(i.addEventListener(l,m,p),()=>i.removeEventListener(l,m,p)),d=R(()=>[A(o),g(u)],([i,l])=>{if(a(),!i)return;const m=ie(l)?{...l}:l;c.push(...t.flatMap(p=>n.map(h=>f(i,p,h,m))))},{immediate:!0,flush:"post"}),s=()=>{d(),a()};return P(s),s}function me(){const e=C(!1),o=z();return o&&q(()=>{e.value=!0},o),e}function pe(e){const o=me();return M(()=>(o.value,!!e()))}function be(e,o,t={}){const{root:n,rootMargin:u="0px",threshold:c=0,window:a=F,immediate:f=!0}=t,d=pe(()=>a&&"IntersectionObserver"in a),s=M(()=>{const h=g(e);return I(h).map(A).filter(re)});let i=S;const l=C(f),m=d.value?R(()=>[s.value,A(n),l.value],([h,E])=>{if(i(),!l.value||!h.length)return;const w=new IntersectionObserver(o,{root:A(E),rootMargin:u,threshold:c});h.forEach(v=>v&&w.observe(v)),i=()=>{w.disconnect(),i=S}},{immediate:f,flush:"post"}):S,p=()=>{i(),m(),l.value=!1};return P(p),{isSupported:d,isActive:l,pause(){i(),l.value=!1},resume(){l.value=!0},stop:p}}const Y=1;function ge(e,o={}){const{throttle:t=0,idle:n=200,onStop:u=S,onScroll:c=S,offset:a={left:0,right:0,top:0,bottom:0},eventListenerOptions:f={capture:!1,passive:!0},behavior:d="auto",window:s=F,onError:i=r=>{console.error(r)}}=o,l=C(0),m=C(0),p=M({get(){return l.value},set(r){E(r,void 0)}}),h=M({get(){return m.value},set(r){E(void 0,r)}});function E(r,D){var b,L,O,j;if(!s)return;const y=g(e);if(!y)return;(O=y instanceof Document?s.document.body:y)==null||O.scrollTo({top:(b=g(D))!=null?b:h.value,left:(L=g(r))!=null?L:p.value,behavior:g(d)});const _=((j=y==null?void 0:y.document)==null?void 0:j.documentElement)||(y==null?void 0:y.documentElement)||y;p!=null&&(l.value=_.scrollLeft),h!=null&&(m.value=_.scrollTop)}const w=C(!1),v=$({left:!0,right:!1,top:!0,bottom:!1}),T=$({left:!1,right:!1,top:!1,bottom:!1}),H=r=>{w.value&&(w.value=!1,T.left=!1,T.right=!1,T.top=!1,T.bottom=!1,u(r))},U=ae(H,t+n),W=r=>{var D;if(!s)return;const b=((D=r==null?void 0:r.document)==null?void 0:D.documentElement)||(r==null?void 0:r.documentElement)||A(r),{display:L,flexDirection:O,direction:j}=getComputedStyle(b),y=j==="rtl"?-1:1,_=b.scrollLeft;T.left=_<l.value,T.right=_>l.value;const V=_*y<=(a.left||0),k=_*y+b.clientWidth>=b.scrollWidth-(a.right||0)-Y;L==="flex"&&O==="row-reverse"?(v.left=k,v.right=V):(v.left=V,v.right=k),l.value=_;let x=b.scrollTop;r===s.document&&!x&&(x=s.document.body.scrollTop),T.top=x<m.value,T.bottom=x>m.value;const G=x<=(a.top||0),X=x+b.clientHeight>=b.scrollHeight-(a.bottom||0)-Y;L==="flex"&&O==="column-reverse"?(v.top=X,v.bottom=G):(v.top=G,v.bottom=X),m.value=x},B=r=>{var D;if(!s)return;const b=(D=r.target.documentElement)!=null?D:r.target;W(b),w.value=!0,U(r),c(r)};return N(e,"scroll",t?fe(B,t,!0,!1):B,f),Q(()=>{try{const r=g(e);if(!r)return;W(r)}catch(r){i(r)}}),N(e,"scrollend",H,f),{x:p,y:h,isScrolling:w,arrivedState:v,directions:T,measure(){const r=g(e);s&&r&&W(r)}}}let ve=0;function ye(e,o={}){const t=C(!1),{document:n=de,immediate:u=!0,manual:c=!1,id:a=`vueuse_styletag_${++ve}`}=o,f=C(e);let d=()=>{};const s=()=>{if(!n)return;const l=n.getElementById(a)||n.createElement("style");l.isConnected||(l.id=a,o.media&&(l.media=o.media),n.head.appendChild(l)),!t.value&&(d=R(f,m=>{l.textContent=m},{immediate:!0}),t.value=!0)},i=()=>{!n||!t.value||(d(),n.head.removeChild(n.getElementById(a)),t.value=!1)};return u&&!c&&Q(s),c||P(i),{id:a,css:f,unload:i,load:s,isLoaded:oe(t)}}export{ge as a,be as b,ye as u};
