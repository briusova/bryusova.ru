import{defineComponent as $,computed as w,ref as M,watch as O,onUnmounted as T,openBlock as f,createElementBlock as k,Fragment as j,renderList as z,normalizeClass as A,createBlock as D,resolveDynamicComponent as F}from"vue";import{B as L,T as P}from"./vues3-C2L1g2Uv.js";import{a as Q,b as R}from"./vueuse-BCBbjqoF.js";import{b as U}from"./vue-router-Db1rCyv1.js";import{p as v,$ as i,g as X,r as Y,t as y,a as q,s as G,b as H,c as I,_ as J}from"./index-CHxj4Ivz.js";import{v as B}from"./uuid-C_lTrkZC.js";import"./vue-Cow_pXkh.js";import"./unocss-DJo0ncQY.js";import"./ofetch-DfaEl5Lr.js";import"./destr-CVtkxrq9.js";import"./ufo-CsG24Xhf.js";import"./magic-string-D9CdRQHO.js";import"./jridgewell-9KHfGwW6.js";import"./iconify-B_9Z2IXi.js";import"./unhead-BCgpajpV.js";import"./packrup-BqxTmGwz.js";import"./hookable-B8xFkYCm.js";import"./vue3-sfc-loader-CoUr1SK8.js";const K=$({__name:"MultiView",setup(S,{expose:_}){_();const n=[],r=w(()=>{{const[[e,o]=[]]=v;v.clear(),e&&o&&v.set(e,o)}return Object.fromEntries(i.value.map(e=>[e.id,X(e)]))}),s=w(()=>new Map(i.value.map(({id:e=B()})=>[e,!1]))),l=M([]),t=M(new Map(s.value)),a=U(),V=({id:e})=>r.value[e],g=()=>{var e,o;if(!q.value&&y.value&&i.value.length){const{scrollX:p,scrollY:x}=window,[u]=i.value,[m]=P.value;if(m&&u){const{$children:[{id:C}={}]=[]}=m,E=!Math.floor(p)&&!Math.floor(x)&&u.id===C?m.id:((e=[...s.value.entries()].find(([,d])=>d))==null?void 0:e[0])??((o=[...t.value.entries()].find(([,d])=>d))==null?void 0:o[0])??u.id;G.value=!1,a.push({name:E}).catch(()=>{})}}},h=([{isIntersecting:e,target:{id:o}={}}={}]=[])=>{t.value=new Map(s.value),o&&e!==void 0&&s.value.set(o,e)},c=()=>{n.forEach(e=>{e()}),n.length=0};Q(window,{behavior:H,onStop:g}),O(l,e=>{c(),setTimeout(()=>{e.forEach(o=>{const{stop:p}=R(o,h,{threshold:I});n.push(p)})})},{deep:L}),T(c);const b={stops:n,templates:r,intersecting:s,refs:l,$intersecting:t,router:a,template:V,onStop:g,callback:h,clearStops:c,get v4(){return B},get $siblings(){return i},get resolve(){return Y},get that(){return y}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),N=["id","role"];function W(S,_,n,r,s,l){return f(!0),k(j,null,z(r.$siblings,t=>{var a;return f(),k("div",{class:A(t.class),id:t.id??r.v4(),key:t.id??r.v4(),role:t.id===((a=r.that)==null?void 0:a.id)?"main":"section",ref_for:!0,ref:"refs","un-cloak":""},[(f(),D(F(r.template(t)),{id:t.id,onVnodeMounted:()=>{r.resolve(t)}},null,8,["id","onVnodeMounted"]))],10,N)}),128)}const ge=J(K,[["render",W],["__file","MultiView.vue"]]);export{ge as default};
